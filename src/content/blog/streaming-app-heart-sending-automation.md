---
title: 配信アプリのハート送信を自動化したい
description: 配信アプリのハート送信機能の自動化について調査してみました。
draft: true
featured: false
pubDatetime: 2023-04-15T00:31:00.000Z
lastmod: 2023-05-30T05:15:14.990Z
tags:
  - JavaScript
postSlug: streaming-app-heart-sending-automation
---

<img src="/assets/img/posts/youtube_hart_mozaiku.png" title="YouTube Liveで大量のハート送信が行われている様子" alt="YouTube Liveで大量のハート送信が行われている様子" width="1024" height="607" >

## 目次

## はじめに

配信アプリには、配信者にアピールするためにハートなどを降らせる機能があります。この機能は、インスタライブや TikTok ライブなどでも実装されています。ただ、ハートを大量に送るためにボタンを連打するのは非常に手間がかかりますよね。そこで、自動化してハート送信を簡単に行えないかと考えました。今回は、PC ブラウザの開発者ツールを使用して、ハート送信を自動化する方法について解説します。

## 対象アプリ

<img src="/assets/img/posts/0000studio_toppage.png" title="00:00studioのトップページ" alt="00:00studioのトップページ" width="1024" height="558" >

最近、[00:00Studio](https://0000.studio/)（フォーゼロ）という配信サービスの存在を知り、よく視聴しています。今回はこのアプリでのハート送信方法を調べました。ただ、2023 年 4 月 28 日で[サービスが終了](https://note.com/0000studio/n/n210eae258d77)してしまうとのことで、残念です。

## 調査

<img src="/assets/img/posts/0000studio_livepage.png" title="開発者ツールでハートボタンを選択" alt="開発者ツールでハートボタンを選択" width="1024" height="709" >

このアプリでは、ハートボタンをクリックするとハートが配信画面に送信される仕様のようです。開発者ツールで確認してみると、ちゃんと`<button>`でマークアップされているようです。早速コンソールからクリックしてみます。

```js
document.querySelector("セレクタ").click();
```

本来、このハートボタンはマウスでクリックすると、ボタン自体にクリックアニメーション（ボタンが沈む感じ）が走るのですが、`.click()`では何も反応しません。((( ; ´•ω•` ; )))

アプリケーション自体が Nuxt.js で作られているようなので、「Shadow DOM を利用していたら、コンソールからクリックできないのか？」と思い、画面内の他のボタンをコンソールからクリックしてみると、案の定クリックでき、イベントが発火しました 🤯

配信画面を開きながらいろいろと調査していると、配信のチャット欄で「以前ハートを無限に送信できたバグがあったけど、次の日には修正されていた」というコメントを見かけました。<br>
「運営が対策しているのかな？」と思い始めましたが、ふと「DOM に付与されたイベントは開発者ツールで確認できる」ということを思い出しました。Chrome の開発者ツールでは、「要素」パネルの下か左に、「イベントリスナー」という、その要素に付与されているイベント一覧を確認できるタブがあります。

<img src="/assets/img/posts/0000studio_dev_event.png" title="ハートボタンのイベントリスナー一覧" alt="ハートボタンのイベントリスナー一覧" width="1024" height="684" >

画像の通り、ハートボタンには、クリックイベントではなく、mousedown イベントが付与されていました 😱<br>
ボタン=クリックだと思い込んでいて、うっかりしていましたが、ハートボタンには、ちゃんとイベントが存在しているようです。<br>
イベントが特定できたので、早速コンソールからそのイベントを発火させます。
クリックイベントだと`.click()`で済むのですが、他のイベントだと.`dispatchEvent()`を使用するみたいです。普段は発火処理はユーザーが行うものなので、こういう関数を使用するのはなんだか新鮮です。

```js
document.querySelector('セレクタ').dispatchEvent(new Event('mousedown'))；
```

イベントが発火して、ハートが無事飛びました！( ⁎ᵕᴗᵕ⁎ ﾉﾉﾞ
あとは、この処理を for 文で繰り返したり、`setInterval()`で永続化すると、自動化の成功です。

## 終わりに

この記事では、配信アプリのハート送信を自動化する方法に挑戦しました。調査の過程がデバッグみたいで楽しかったです。<br>
ただ、他のアプリケーションでも似たような方法で自動化できる可能性があると思いますが、大量のハートを瞬時に送信することはサーバーに負荷がかかるため、絶対にやめましょう。<br>
また、前項で`setInterval()`で永続化する方法を紹介しましたが、無制限でエンドレスに処理を実行することは避けましょう。
節度を持って、ハート送信を楽しんでください。
